# Експортування модуля

Експортування модуля для перевикористання його іншим розробником або модулем.

### Поняття експорту модуля

Експорт модуля - особливий вид побудови модульної системи. Результатом експорту модуля є згенерований `out-вілфайл` та, опціонально, архів з файлами модуля. Експортований `out-вілфайл` містить повну інформацію про експортований модуль та може використоватись для імпорту віддаленого підмодуля. Тому, для можливості своєчасного оновлення, при експорті модуля в `вілфайлі` обов'язково вказується секція `about` з полями `name` i `version`.

### Початкова конфігурація

Для створення експорту модуля потрібно мати [модуль](../concept/Module.md#Модуль) - `вілфайл` та файли, які в ньому описані.

<details>
  <summary><u>Структура файлів</u></summary>

```
exportSingle
     ├── fileToExport
     └── .will.yml

```

</details>

Для дослідження операції експорту модуля створіть структуру файлів приведену вище.

<details>
  <summary><u>Код файла <code>.will.yml</code></u></summary>

```yaml
about :
  name : exportModule
  description : "To export single file"
  version : 0.0.1

path :
  in : '.'
  out : 'out'
  fileToExport : 'fileToExport*'

step  :
  export.single :
    inherit : module.export
    export : path::fileToExport
    tar : 0

build :
  export.single :
    criterion :
      default : 1
      export : 1
    steps :
      - export.single
```

</details>

В `вілфайл` внесіть приведений код.

Секція `path` описує карту шляхів модуля для швидкого орієнтування в його структурі.
`in` - вбудований шлях, відносно якого розташовуються інші відносні шляхи модуля. В прикладі - директорія файла `.will.yml`.
`out` - вбудований шлях для експортованих `out-вілфайлів`, вказаний відносно шляху `in`.
`fileToExport` - шлях до файлів експорту, вказаний користувачем відносно директорії `in`. В прикладі, значення `fileToExport*` вибере будь-який файл, який починається з `fileToExport`. Глоб в значенні необхідний для можливості вибору множини файлів.

Крок `export.single` призначений для експорту. Він має поля:
`inherit` - наслідування вбудованого кроку експортування модуля `module.export`.
`tar` - архівування експортованих файлів (1 - ввімкнене / 0 - вимкнене архівування).
`export` - шлях до файлу або директорії з файлами для експорту. Використовуйте синтаксис `path::some.export.path` для правильного функціонування утиліти.

Збірка `export.single`.
Критеріон `export` вказується в збірках призначених для експорту. При використанні окремо від критеріона `default` він веде себе як звичайний критеріон утиліти `willbe`. А у випадку поєднання критеріонів `default : 1` i `export : 1` створюється збірка експорту модуля за замовчуванням. Таким чином, в одному `вілфайлі` одночасно може вказуватись дві збірки за замовчуванням - побудови і експорту.

### Експорт модуля

Запуск експорту модуля здійснюється командою [`.export`](../concept/Command.md#Таблиця-команд-утиліти-willbe). При побудові експорту за замовчуванням використовується фраза `will .export`.

<details>
  <summary><u>Вивід команди <code>will .export</code></u></summary>

```
[user@user ~]$ will .export
...
  Exporting module::exportModule / build::export.single
   + Write out willfile /mnt/home-hdd/Temp/tmp/out/exportModule.out.will.yml
   . Opened . /mnt/home-hdd/Temp/tmp/out/exportModule.out.will.yml
  Exported module::exportModule / build::export.single with 1 file(s) in 0.967s
```

</details>

Запустіть експорт модуля командою `will .export` в директорії `.will.yml`.

Після виконання команди утиліта `willbe` згенерувала `out-вілфайл` з назвою `exportModule.out.will.yml`. Назва `out-вілфайла` співпадає з назвою модуля в секції `about`.
Експортований файл утиліта помістила в директорію `out`.

Перевірте зміни в директорії `exportSingle`. Порівняйте з приведеною нижче структурою.

<details>
  <summary><u>Структура модуля після експорту</u></summary>

```
exportSingle
     ├── out
     │    └── exportModule.out.will.yml
     ├── fileToExport
     └── .will.yml

```

</details>

### Підсумок

- Експортовані модулі використовуються для імпорту підмодулів.
- Критеріон `export` позначає збірки експорту модуля.
- Поєднання критеріонів `default : 1` i `export : 1` створює збірку експорту модуля за замовчуванням.
- В модулі може бути дві збірки побудови за замовчуванням - побудови модуля і експорту.

[Повернутись до змісту](../README.md#tutorials)
