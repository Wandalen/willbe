# Файлові фільтри

Спосіб опису умов відбору необхідних для виконання деякої операції файлів. Рефлектор містить два фільтра файлів: <code>src</code> та <code>dst</code>.

Файли можуть бути відібрані:
- простими файловими фільтрами;
- масками файлових операцій;
- часовими фільтрами;
- ґлобами в мапі шляхів.

### Прості файлові фільтри

Прості фільтри - це фільтри, які відбирають файли за назвою. Мають рядкові значення.

- `begins` - виключає із вибірки всі файли, назва яких не починається з указаного в фільтрі слова.
- `ends` - виключає із вибірки всі файли, назва яких не закінчується на вказане в фільтрі слово.
- `hasExtension` - виключає із вибірки, всі файли, імена яких не мають вказаних розширень. Розширення файла може бути складеним і складатися із декількох частин. Утиліта `willbe` зчитує його, починаючи з першої крапки в назві файла. Наприклад, файл `somefile.txt.md` має два розширення - `txt` i `md`.

### Приклад запису простого фільтра:

```yaml
src:
  begins : 'file'
  hasExtension : 'js'

```

### Маски рефлектора

Для використання регулярних виразів при відборі файлів застосовуйте маски.

Рефлектори `willbe` має три групи масок, в залежності від того до яких типів файлів вони застосовуються:
- `maskDirectory` - маски директорії, застосовуються лише до директорій;  
- `maskTerminal` - маски термінальних файлів, застосовуються лише до термінальних (звичайних) файлів, до директорій не застосовуються;
- `maskAll` - маски, які застосовуються до всіх типів файлів.

В кожній із цих трьох груп масок є такі:
- `includeAny` - виключити файли, які не мають співпадіння із жодним із регулярних виразів даного фільтра;
- `includeAll` - виключити файли, які не мають співпадіння із всіма регулярними виразами даного фільтра;
- `excludeAny` - виключити файли, які мають принаймні одне співпадіння із регулярними виразами даного фільтра;  
- `excludeAll` - виключити файли, які мають співпадіння із всіма регулярними виразами даного фільтра.

### Приклад масок рефлектора:

```yaml
src :
  maskDirectory :
    includeAll : !!js/regexp '/\.js$/'  
    excludeAny : !!js/regexp '/\.debug/'  

```

Цей запис означає, включити в вибірку всі файли з розширенням '.js' та виключити будь-які файли, що містять '.debug' в імені.

### Часові фільтри  

Фільтри необхідні для обмеження вибору по часовій ознаці. Рефлектори мають чотири часових фільтра: `notOlder`, `notNewer`, `notOlderAge`, `notNewerAge`. В параметрах полів вносяться значення в мілісекундах (1 с = 1000 мс; 1 година = 3600000 мс).

Існують такі часові фільтри:
- `notOlder` - всі файли не старше від встановленого на момент виконання побудови;  
- `notNewer` - всі файли не новіше від встановленого на момент виконання побудови;
- `notOlderAge` - вік окремих файлів, не більше від встановленого на момент виконання побудови;  
- `notNewerAge` - вік окремих файлів, не менше від встановленого на момент виконання побудови.

### Приклад застосування часових фільтрів 

```yaml
src :
  notOlderAge : 10000
  
```

Часовим фільтром `notOlderAge` вибираються файли, що мають вік не більш 10 секунд.

### Використання ґлобів в мапі шляхів.

Виключати із вибірки файли можливо не лише фільтрами файлів, але і за допомогою [мапи шляхів](<./ResourceReflector.md#>).
