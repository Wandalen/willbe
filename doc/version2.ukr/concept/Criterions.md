# Критеріони

Елемент порівняння для відбору ресурсів.  

В `will-файлі` критеріони представлені [асоціативним масивом](<https://en.wikipedia.org/wiki/Associative_array>) ( мапа критеріонів ). Кожен ресурс може мати будь-яку кількість критеріонів. Критеріони використовуються при відобрі одним ресурсом іншого через [глоб](<(https://linuxhint.com/bash_globbing_tutorial>). При використанні селектора без глоба критеріони не використовуються, так як немає жодної невизначеності в такому селекторі.  

### Приклад

```yml
path :

  out.debug :
    path : out/debug
    criterion :
      debug : 1
  out.release :
    path : out/release
    criterion :
      debug : 0

step :

  delete.files :
    inherit : predefined.delete
    filePath : path::out.*
  criterion :
    debug : 1
```

Наприклад, в кроці `step::delete.files` використовується шлях `path::out.debug`, котрий вибирається через селектор із глобом `path::out.*`. Утиліта знає, що із двох можливих шляхів `path::out.debug` або `path::out.release` потрібно вибрати саме `path::out.debug` тому, що і крок `step::delete.files`, і шлях `path::out.debug` має критеріон `debug : 1`.

### Розгортання критеріонів

В `will-файлі` для окремого критеріона можливо задати множину значень, при цьому буде створено не один ресурс, а, стільки, скільки можливо різних комбінацій значень критеріонів цього ресурса.

```yaml
step :
  delete.files :
    inherit : predefined.delete
    filePath : path::out.*
  criterion :
    raw : 1           # одиничне значення - звичайна форма запису
    debug : [ 0,1 ]   # множинне значення - запис в формі массиву, використовується при розгортанні критеріонів
```

Визначено крок `step::delete.files`, котрий має два критеріона `raw` та `debug`. Критеріон `debug` має множинне значення, а отже під час розгортання критеріонів буде створено 2-ва кроки `delete.files.` та `delete.files.debug`.

[Туторіал](../tutorial/WillFileMinimization.md) про розгортання критеріонів.

### Можливі значення.

Критеріони можуть мати бульові або рядкові значення.

```yaml
condition : false       # бульове значення
compile : 1             # бульове значення
raw : one               # рядкове значення
name : name1            # рядкове значення
```

`false` та `0` -- вважаються синонімами
`true` та `1` -- вважаються синонімами

### Ресурс за замовчуванням

Критеріон `default` має особливе значення - за допомогою критеріона `default : 1` можливо задати збірку, що має збиратися за замовчуванням. 

![criterion.default.png](./Images/criterion.default.png)

Для побудови збірки `release` вводиться фраза `will .build` без аргумента.

### Критеріон збірки для експортування

Спеціальний критеріон `export : 1` диференціює збірку, яка призначеня для еспортування модуля від інших збірок даного модуля.

![criterion.export.png](./Images/criterion.export.png)

Даний модуль має одну звичайну збірку та один експорт. Команда `will .build` виконає збірку `build::release`, а команда `will .export` виконає збірку для експортування `build::export`. Обидві збірки є збірками по замовчуванню так як мають `default : 1`, а отже команди для їх побудови не потребують додаткових аргментів.

### Ресурси, що не мають критеріона

При вибірці [селектором із глобом](Selector.md#Селектор-з-ґлобом), ресурси, що не мають критеріона вибираються, а не відкидаються.

![resource.without.criterion.png](./Images/resource.without.criterion.png)

Крок `step::proto.release` буде виконаний при будь-якому значенні критеріона `debug` в збірці `build::release`. Якщо додати інші критеріони в `step::proto.relase` або в `build::release` то результат не зміниться.
